From 9c4abc561ebc6fa736e1d775637a3fb5707df5aa Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Pablo=20Correa=20G=C3=B3mez?= <ablocorrea@hotmail.com>
Date: Thu, 10 Oct 2024 14:16:30 +0200
Subject: [PATCH] abuild: don't set the error on throwing a warning

Fixes da9269ba62b60757663ff8761ff7e218d1ab498c
---
 abuild.in         | 1 -
 tests/abuild_test | 3 +--
 2 files changed, 1 insertion(+), 3 deletions(-)

diff --git a/abuild.in b/abuild.in
index 87e121c..6dba0c5 100644
--- a/abuild.in
+++ b/abuild.in
@@ -806,7 +806,6 @@ postcheck() {
 		for i in bin sbin lib; do
 			if [ -L "$dir"/$i ] || [ -e "$dir"/$i ]; then
 				warning "Packages must not put anything under /$i, use /usr/${i##*s} instead"
-				e=1
 			fi
 		done
 	fi
diff --git a/tests/abuild_test b/tests/abuild_test
index ee4d8ff..a26dfb4 100755
--- a/tests/abuild_test
+++ b/tests/abuild_test
@@ -1304,10 +1304,9 @@ abuild_usr_merge_body() {
 				"\$pkgdir"/sbin
 		}
 	EOF
-	atf_check -s exit:1 \
+	atf_check -s exit:0 \
 		-e match:"WARNING:.*: Packages must not put anything under /lib, use /usr/lib instead" \
 		-e match:"WARNING:.*: Packages must not put anything under /bin, use /usr/bin instead" \
 		-e match:"WARNING:.*: Packages must not put anything under /sbin, use /usr/bin instead" \
 		abuild
 }
-
-- 
2.46.2

